@{
    ViewData["Title"] = "Cadastro da empresa";
}

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-body">
            <h1 class="h4 fw-bold mb-4">Cadastro de Instituição</h1>

    <div class="right-panel">
        <div class="form-container">
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>

            <div class="form-header">
                <h1>Cadastro de Instituição</h1>
                <p class="mb-0">Preencha os campos abaixo para registrar sua instituição</p>
            </div>

            <div class="container">
                <div class="step-indicator">
                    <div class="step active">
                        <div class="step-number">1</div>
                        <div class="step-title">Dados Institucionais</div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-title">Endereço</div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-title">Finalizar</div>
                    </div>
                </div>
            </div>
            <form method="post" asp-controller="Instituicao" asp-action="Cadastro" enctype="multipart/form-data">
                <!-- DADOS INSTITUCIONAIS -->
                <div class="form-step active">
                    <div class="mb-5">
                        <h2 class="section-title mb-4">
                            <i class="bi bi-building"></i> Dados Institucionais
                        </h2>
                        <div class="row g-4">
                            <div class="col-12">
                                <div class="form-floating">
                                    <input asp-for="Nome" class="form-control" placeholder="Nome da Instituição" />
                                    <label asp-for="Nome" class="required-field"></label>
                                    <span asp-validation-for="Nome" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input asp-for="Documento" class="form-control" placeholder="CNPJ" />
                                    <label asp-for="Documento" class="required-field"></label>
                                    <span asp-validation-for="Documento" class="text-danger"></span>
                                </div>
                                <div class="form-text">Formato: 00.000.000/0000-00</div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input asp-for="Email" class="form-control" placeholder="E-mail" />
                                    <label asp-for="Email" class="required-field"></label>
                                    <span asp-validation-for="Email" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input asp-for="Telefone" class="form-control" placeholder="Telefone" />
                                    <label asp-for="Telefone" class="required-field"></label>
                                    <span asp-validation-for="Telefone" class="text-danger"></span>
                                </div>
                                <div class="form-text">Formato: (00) 00000-0000</div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating">
                                    <textarea asp-for="Descricao" class="form-control" placeholder="Descrição da instituição" style="height: 120px;"></textarea>
                                    <label asp-for="Descricao" class="required-field"></label>
                                    <span asp-validation-for="Descricao" class="text-danger"></span>
                                </div>
                            </div>

                    <!-- Foto(s) -->
                    <div class="col-md-6">
                        <label class="form-label">Foto(s) da Instituição <span class="text-danger">*</span></label>
                        <input type="file" name="Fotos" multiple accept="image/*" class="form-control" />
                    </div>

                    <!-- Descrição -->
                    <div class="col-12">
                        <label class="form-label">Descrição <span class="text-danger">*</span></label>
                        <textarea name="Descricao" rows="4" class="form-control"
                                  placeholder="Descreva brevemente os serviços ou missão da instituição..."></textarea>
                    </div>
                </div>

                <!-- Grupo: Criar Senha -->
                <h5 class="border-bottom pb-2 mt-5 mb-3">Criar Senha</h5>
                <div class="row g-4">
                    <!-- Senha -->
                    <div class="col-md-6">
                        <label class="form-label">Senha</label>
                        <input type="password" name="Senha" class="form-control" />
                    </div>

                    <!-- Confirmar Senha -->
                    <div class="col-md-6">
                        <label class="form-label">Confirmar Senha</label>
                        <input type="password" name="ConfirmarSenha" class="form-control" />
                    </div>
                </div>

                <!-- Botões -->
                <div class="d-flex flex-column flex-sm-row justify-content-between gap-3 mt-4">
                    <button type="submit" class="btn btn-primary w-100 w-sm-auto">
                        Cadastrar Instituição
                    </button>
                    <button type="reset" class="btn btn-outline-secondary w-100 w-sm-auto">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@section Scripts {
    <script src="~/js/paginas/cadastro-instituicao/cadastro-instituicao.js"></script>


    <script>
        const inputFotos = document.getElementById('fotos');
        const previewContainer = document.getElementById('previewContainer');
        const removeBtn = document.getElementById('removeImagesButton');

        inputFotos.addEventListener('change', function () {
            previewContainer.innerHTML = '';
            const files = Array.from(this.files);

            if (files.length > 0) {
                removeBtn.classList.remove('d-none');
            } else {
                removeBtn.classList.add('d-none');
            }

            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = function (event) {
                    const img = document.createElement('img');
                    img.src = event.target.result;
                    img.className = "img-thumbnail";
                    img.style.height = "100px";
                    img.style.objectFit = "cover";
                    previewContainer.appendChild(img);
                };
                reader.readAsDataURL(file);
            });
        });

        removeBtn.addEventListener('click', function () {
            inputFotos.value = '';
            previewContainer.innerHTML = '';
            removeBtn.classList.add('d-none');
        });
    </script>
}
